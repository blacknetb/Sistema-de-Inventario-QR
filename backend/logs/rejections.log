{
  "date": "Wed Dec 17 2025 14:24:11 GMT-0600 (hora estándar central)",
  "error": {
    "code": "ER_FK_INCOMPATIBLE_COLUMNS",
    "executionTime": 8,
    "originalError": {
      "code": "ER_FK_INCOMPATIBLE_COLUMNS",
      "errno": 3780,
      "message": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n          \n          INDEX idx_inventory_product (product_id),\n          INDEX idx_inventory_type (type),\n          INDEX idx_inventory_reference (reference_type, reference_id),\n          INDEX idx_inventory_user (user_id),\n          INDEX idx_inventory_created_at (created_at),\n          FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE,\n          FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\n        ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci\n        ",
      "sqlMessage": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sqlState": "HY000"
    },
    "params": [],
    "queryId": "query-1766003051960-72dobr2",
    "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TI"
  },
  "level": "error",
  "message": "unhandledRejection: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\nError: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "os": {
    "loadavg": [
      0,
      0,
      0
    ],
    "uptime": 174825.968
  },
  "process": {
    "argv": [
      "H:\\NODEJS\\node.exe",
      "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\server.js"
    ],
    "cwd": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend",
    "execPath": "H:\\NODEJS\\node.exe",
    "gid": null,
    "memoryUsage": {
      "arrayBuffers": 61225,
      "external": 2385866,
      "heapTotal": 55783424,
      "heapUsed": 23911864,
      "rss": 77717504
    },
    "pid": 17980,
    "uid": null,
    "version": "v22.19.0"
  },
  "rejection": true,
  "stack": "Error: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "timestamp": "2025-12-17 14:24:11.978",
  "trace": [
    {
      "column": 29,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "DatabaseManager.query",
      "line": 915,
      "method": "query",
      "native": false
    },
    {
      "column": 5,
      "file": "node:internal/process/task_queues",
      "function": "process.processTicksAndRejections",
      "line": 105,
      "method": "processTicksAndRejections",
      "native": false
    },
    {
      "column": 9,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.createTablesIfNotExist",
      "line": 625,
      "method": "createTablesIfNotExist",
      "native": false
    },
    {
      "column": 7,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.initialize",
      "line": 208,
      "method": "initialize",
      "native": false
    }
  ]
}
{
  "date": "Wed Dec 17 2025 14:24:38 GMT-0600 (hora estándar central)",
  "error": {
    "code": "ER_FK_INCOMPATIBLE_COLUMNS",
    "executionTime": 10,
    "originalError": {
      "code": "ER_FK_INCOMPATIBLE_COLUMNS",
      "errno": 3780,
      "message": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n          \n          INDEX idx_inventory_product (product_id),\n          INDEX idx_inventory_type (type),\n          INDEX idx_inventory_reference (reference_type, reference_id),\n          INDEX idx_inventory_user (user_id),\n          INDEX idx_inventory_created_at (created_at),\n          FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE,\n          FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\n        ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci\n        ",
      "sqlMessage": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sqlState": "HY000"
    },
    "params": [],
    "queryId": "query-1766003078677-yywrt8w",
    "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TI"
  },
  "level": "error",
  "message": "unhandledRejection: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\nError: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "os": {
    "loadavg": [
      0,
      0,
      0
    ],
    "uptime": 174852.671
  },
  "process": {
    "argv": [
      "H:\\NODEJS\\node.exe",
      "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\server.js"
    ],
    "cwd": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend",
    "execPath": "H:\\NODEJS\\node.exe",
    "gid": null,
    "memoryUsage": {
      "arrayBuffers": 61225,
      "external": 2385866,
      "heapTotal": 56045568,
      "heapUsed": 23886584,
      "rss": 76054528
    },
    "pid": 14620,
    "uid": null,
    "version": "v22.19.0"
  },
  "rejection": true,
  "stack": "Error: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "timestamp": "2025-12-17 14:24:38.689",
  "trace": [
    {
      "column": 29,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "DatabaseManager.query",
      "line": 915,
      "method": "query",
      "native": false
    },
    {
      "column": 5,
      "file": "node:internal/process/task_queues",
      "function": "process.processTicksAndRejections",
      "line": 105,
      "method": "processTicksAndRejections",
      "native": false
    },
    {
      "column": 9,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.createTablesIfNotExist",
      "line": 625,
      "method": "createTablesIfNotExist",
      "native": false
    },
    {
      "column": 7,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.initialize",
      "line": 208,
      "method": "initialize",
      "native": false
    }
  ]
}
{
  "date": "Wed Dec 17 2025 14:27:19 GMT-0600 (hora estándar central)",
  "error": {
    "code": "ER_FK_INCOMPATIBLE_COLUMNS",
    "executionTime": 5,
    "originalError": {
      "code": "ER_FK_INCOMPATIBLE_COLUMNS",
      "errno": 3780,
      "message": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n          \n          INDEX idx_inventory_product (product_id),\n          INDEX idx_inventory_type (type),\n          INDEX idx_inventory_reference (reference_type, reference_id),\n          INDEX idx_inventory_user (user_id),\n          INDEX idx_inventory_created_at (created_at),\n          FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE,\n          FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\n        ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci\n        ",
      "sqlMessage": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sqlState": "HY000"
    },
    "params": [],
    "queryId": "query-1766003239723-uebijqt",
    "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TI"
  },
  "level": "error",
  "message": "unhandledRejection: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\nError: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "os": {
    "loadavg": [
      0,
      0,
      0
    ],
    "uptime": 175013.718
  },
  "process": {
    "argv": [
      "H:\\NODEJS\\node.exe",
      "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\server.js"
    ],
    "cwd": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend",
    "execPath": "H:\\NODEJS\\node.exe",
    "gid": null,
    "memoryUsage": {
      "arrayBuffers": 53034,
      "external": 2377675,
      "heapTotal": 39792640,
      "heapUsed": 24022800,
      "rss": 75968512
    },
    "pid": 12120,
    "uid": null,
    "version": "v22.19.0"
  },
  "rejection": true,
  "stack": "Error: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "timestamp": "2025-12-17 14:27:19.731",
  "trace": [
    {
      "column": 29,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "DatabaseManager.query",
      "line": 915,
      "method": "query",
      "native": false
    },
    {
      "column": 5,
      "file": "node:internal/process/task_queues",
      "function": "process.processTicksAndRejections",
      "line": 105,
      "method": "processTicksAndRejections",
      "native": false
    },
    {
      "column": 9,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.createTablesIfNotExist",
      "line": 625,
      "method": "createTablesIfNotExist",
      "native": false
    },
    {
      "column": 7,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.initialize",
      "line": 208,
      "method": "initialize",
      "native": false
    }
  ]
}
{
  "date": "Wed Dec 17 2025 14:27:35 GMT-0600 (hora estándar central)",
  "error": {
    "code": "ER_FK_INCOMPATIBLE_COLUMNS",
    "executionTime": 4,
    "originalError": {
      "code": "ER_FK_INCOMPATIBLE_COLUMNS",
      "errno": 3780,
      "message": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n          \n          INDEX idx_inventory_product (product_id),\n          INDEX idx_inventory_type (type),\n          INDEX idx_inventory_reference (reference_type, reference_id),\n          INDEX idx_inventory_user (user_id),\n          INDEX idx_inventory_created_at (created_at),\n          FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE,\n          FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\n        ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci\n        ",
      "sqlMessage": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sqlState": "HY000"
    },
    "params": [],
    "queryId": "query-1766003255787-jnpa8pl",
    "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TI"
  },
  "level": "error",
  "message": "unhandledRejection: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\nError: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "os": {
    "loadavg": [
      0,
      0,
      0
    ],
    "uptime": 175029.781
  },
  "process": {
    "argv": [
      "H:\\NODEJS\\node.exe",
      "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\server.js"
    ],
    "cwd": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend",
    "execPath": "H:\\NODEJS\\node.exe",
    "gid": null,
    "memoryUsage": {
      "arrayBuffers": 61226,
      "external": 2385867,
      "heapTotal": 39268352,
      "heapUsed": 24080416,
      "rss": 75530240
    },
    "pid": 4444,
    "uid": null,
    "version": "v22.19.0"
  },
  "rejection": true,
  "stack": "Error: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "timestamp": "2025-12-17 14:27:35.793",
  "trace": [
    {
      "column": 29,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "DatabaseManager.query",
      "line": 915,
      "method": "query",
      "native": false
    },
    {
      "column": 5,
      "file": "node:internal/process/task_queues",
      "function": "process.processTicksAndRejections",
      "line": 105,
      "method": "processTicksAndRejections",
      "native": false
    },
    {
      "column": 9,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.createTablesIfNotExist",
      "line": 625,
      "method": "createTablesIfNotExist",
      "native": false
    },
    {
      "column": 7,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.initialize",
      "line": 208,
      "method": "initialize",
      "native": false
    }
  ]
}
{
  "date": "Wed Dec 17 2025 14:27:38 GMT-0600 (hora estándar central)",
  "error": {
    "code": "ER_FK_INCOMPATIBLE_COLUMNS",
    "executionTime": 23,
    "originalError": {
      "code": "ER_FK_INCOMPATIBLE_COLUMNS",
      "errno": 3780,
      "message": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n          \n          INDEX idx_inventory_product (product_id),\n          INDEX idx_inventory_type (type),\n          INDEX idx_inventory_reference (reference_type, reference_id),\n          INDEX idx_inventory_user (user_id),\n          INDEX idx_inventory_created_at (created_at),\n          FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE,\n          FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\n        ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci\n        ",
      "sqlMessage": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sqlState": "HY000"
    },
    "params": [],
    "queryId": "query-1766003258568-k5b9bw0",
    "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TI"
  },
  "level": "error",
  "message": "unhandledRejection: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\nError: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "os": {
    "loadavg": [
      0,
      0,
      0
    ],
    "uptime": 175032.578
  },
  "process": {
    "argv": [
      "H:\\NODEJS\\node.exe",
      "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\server.js"
    ],
    "cwd": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend",
    "execPath": "H:\\NODEJS\\node.exe",
    "gid": null,
    "memoryUsage": {
      "arrayBuffers": 61225,
      "external": 2385866,
      "heapTotal": 55521280,
      "heapUsed": 23665248,
      "rss": 75743232
    },
    "pid": 7284,
    "uid": null,
    "version": "v22.19.0"
  },
  "rejection": true,
  "stack": "Error: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "timestamp": "2025-12-17 14:27:38.599",
  "trace": [
    {
      "column": 29,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "DatabaseManager.query",
      "line": 915,
      "method": "query",
      "native": false
    },
    {
      "column": 5,
      "file": "node:internal/process/task_queues",
      "function": "process.processTicksAndRejections",
      "line": 105,
      "method": "processTicksAndRejections",
      "native": false
    },
    {
      "column": 9,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.createTablesIfNotExist",
      "line": 625,
      "method": "createTablesIfNotExist",
      "native": false
    },
    {
      "column": 7,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.initialize",
      "line": 208,
      "method": "initialize",
      "native": false
    }
  ]
}
{
  "date": "Wed Dec 17 2025 14:27:56 GMT-0600 (hora estándar central)",
  "error": {
    "code": "ER_FK_INCOMPATIBLE_COLUMNS",
    "executionTime": 7,
    "originalError": {
      "code": "ER_FK_INCOMPATIBLE_COLUMNS",
      "errno": 3780,
      "message": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n          \n          INDEX idx_inventory_product (product_id),\n          INDEX idx_inventory_type (type),\n          INDEX idx_inventory_reference (reference_type, reference_id),\n          INDEX idx_inventory_user (user_id),\n          INDEX idx_inventory_created_at (created_at),\n          FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE,\n          FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\n        ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci\n        ",
      "sqlMessage": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sqlState": "HY000"
    },
    "params": [],
    "queryId": "query-1766003276636-5eqdcth",
    "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TI"
  },
  "level": "error",
  "message": "unhandledRejection: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\nError: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "os": {
    "loadavg": [
      0,
      0,
      0
    ],
    "uptime": 175050.625
  },
  "process": {
    "argv": [
      "H:\\NODEJS\\node.exe",
      "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\server.js"
    ],
    "cwd": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend",
    "execPath": "H:\\NODEJS\\node.exe",
    "gid": null,
    "memoryUsage": {
      "arrayBuffers": 61330,
      "external": 2385971,
      "heapTotal": 55521280,
      "heapUsed": 24066024,
      "rss": 75649024
    },
    "pid": 21804,
    "uid": null,
    "version": "v22.19.0"
  },
  "rejection": true,
  "stack": "Error: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "timestamp": "2025-12-17 14:27:56.646",
  "trace": [
    {
      "column": 29,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "DatabaseManager.query",
      "line": 915,
      "method": "query",
      "native": false
    },
    {
      "column": 5,
      "file": "node:internal/process/task_queues",
      "function": "process.processTicksAndRejections",
      "line": 105,
      "method": "processTicksAndRejections",
      "native": false
    },
    {
      "column": 9,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.createTablesIfNotExist",
      "line": 625,
      "method": "createTablesIfNotExist",
      "native": false
    },
    {
      "column": 7,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.initialize",
      "line": 208,
      "method": "initialize",
      "native": false
    }
  ]
}
{
  "date": "Wed Dec 17 2025 14:29:01 GMT-0600 (hora estándar central)",
  "error": {
    "code": "ER_FK_INCOMPATIBLE_COLUMNS",
    "executionTime": 4,
    "originalError": {
      "code": "ER_FK_INCOMPATIBLE_COLUMNS",
      "errno": 3780,
      "message": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n          \n          INDEX idx_inventory_product (product_id),\n          INDEX idx_inventory_type (type),\n          INDEX idx_inventory_reference (reference_type, reference_id),\n          INDEX idx_inventory_user (user_id),\n          INDEX idx_inventory_created_at (created_at),\n          FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE,\n          FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\n        ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci\n        ",
      "sqlMessage": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sqlState": "HY000"
    },
    "params": [],
    "queryId": "query-1766003341541-yts36ut",
    "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TI"
  },
  "level": "error",
  "message": "unhandledRejection: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\nError: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "os": {
    "loadavg": [
      0,
      0,
      0
    ],
    "uptime": 175115.531
  },
  "process": {
    "argv": [
      "H:\\NODEJS\\node.exe",
      "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\server.js"
    ],
    "cwd": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend",
    "execPath": "H:\\NODEJS\\node.exe",
    "gid": null,
    "memoryUsage": {
      "arrayBuffers": 61225,
      "external": 2385866,
      "heapTotal": 55783424,
      "heapUsed": 23862040,
      "rss": 75698176
    },
    "pid": 17204,
    "uid": null,
    "version": "v22.19.0"
  },
  "rejection": true,
  "stack": "Error: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "timestamp": "2025-12-17 14:29:01.547",
  "trace": [
    {
      "column": 29,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "DatabaseManager.query",
      "line": 915,
      "method": "query",
      "native": false
    },
    {
      "column": 5,
      "file": "node:internal/process/task_queues",
      "function": "process.processTicksAndRejections",
      "line": 105,
      "method": "processTicksAndRejections",
      "native": false
    },
    {
      "column": 9,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.createTablesIfNotExist",
      "line": 625,
      "method": "createTablesIfNotExist",
      "native": false
    },
    {
      "column": 7,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.initialize",
      "line": 208,
      "method": "initialize",
      "native": false
    }
  ]
}
{
  "date": "Wed Dec 17 2025 14:29:17 GMT-0600 (hora estándar central)",
  "error": {
    "code": "ER_FK_INCOMPATIBLE_COLUMNS",
    "executionTime": 3,
    "originalError": {
      "code": "ER_FK_INCOMPATIBLE_COLUMNS",
      "errno": 3780,
      "message": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n          \n          INDEX idx_inventory_product (product_id),\n          INDEX idx_inventory_type (type),\n          INDEX idx_inventory_reference (reference_type, reference_id),\n          INDEX idx_inventory_user (user_id),\n          INDEX idx_inventory_created_at (created_at),\n          FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE,\n          FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\n        ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci\n        ",
      "sqlMessage": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sqlState": "HY000"
    },
    "params": [],
    "queryId": "query-1766003357100-evr0smj",
    "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TI"
  },
  "level": "error",
  "message": "unhandledRejection: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\nError: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "os": {
    "loadavg": [
      0,
      0,
      0
    ],
    "uptime": 175131.093
  },
  "process": {
    "argv": [
      "H:\\NODEJS\\node.exe",
      "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\server.js"
    ],
    "cwd": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend",
    "execPath": "H:\\NODEJS\\node.exe",
    "gid": null,
    "memoryUsage": {
      "arrayBuffers": 61215,
      "external": 2385856,
      "heapTotal": 56045568,
      "heapUsed": 23702576,
      "rss": 76156928
    },
    "pid": 5244,
    "uid": null,
    "version": "v22.19.0"
  },
  "rejection": true,
  "stack": "Error: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "timestamp": "2025-12-17 14:29:17.105",
  "trace": [
    {
      "column": 29,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "DatabaseManager.query",
      "line": 915,
      "method": "query",
      "native": false
    },
    {
      "column": 5,
      "file": "node:internal/process/task_queues",
      "function": "process.processTicksAndRejections",
      "line": 105,
      "method": "processTicksAndRejections",
      "native": false
    },
    {
      "column": 9,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.createTablesIfNotExist",
      "line": 625,
      "method": "createTablesIfNotExist",
      "native": false
    },
    {
      "column": 7,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.initialize",
      "line": 208,
      "method": "initialize",
      "native": false
    }
  ]
}
{
  "date": "Wed Dec 17 2025 14:29:33 GMT-0600 (hora estándar central)",
  "error": {
    "code": "ER_FK_INCOMPATIBLE_COLUMNS",
    "executionTime": 3,
    "originalError": {
      "code": "ER_FK_INCOMPATIBLE_COLUMNS",
      "errno": 3780,
      "message": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n          \n          INDEX idx_inventory_product (product_id),\n          INDEX idx_inventory_type (type),\n          INDEX idx_inventory_reference (reference_type, reference_id),\n          INDEX idx_inventory_user (user_id),\n          INDEX idx_inventory_created_at (created_at),\n          FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE,\n          FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\n        ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci\n        ",
      "sqlMessage": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sqlState": "HY000"
    },
    "params": [],
    "queryId": "query-1766003373579-bbjef0g",
    "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TI"
  },
  "level": "error",
  "message": "unhandledRejection: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\nError: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "os": {
    "loadavg": [
      0,
      0,
      0
    ],
    "uptime": 175147.562
  },
  "process": {
    "argv": [
      "H:\\NODEJS\\node.exe",
      "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\server.js"
    ],
    "cwd": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend",
    "execPath": "H:\\NODEJS\\node.exe",
    "gid": null,
    "memoryUsage": {
      "arrayBuffers": 61226,
      "external": 2385867,
      "heapTotal": 38744064,
      "heapUsed": 24177080,
      "rss": 75317248
    },
    "pid": 25224,
    "uid": null,
    "version": "v22.19.0"
  },
  "rejection": true,
  "stack": "Error: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "timestamp": "2025-12-17 14:29:33.584",
  "trace": [
    {
      "column": 29,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "DatabaseManager.query",
      "line": 915,
      "method": "query",
      "native": false
    },
    {
      "column": 5,
      "file": "node:internal/process/task_queues",
      "function": "process.processTicksAndRejections",
      "line": 105,
      "method": "processTicksAndRejections",
      "native": false
    },
    {
      "column": 9,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.createTablesIfNotExist",
      "line": 625,
      "method": "createTablesIfNotExist",
      "native": false
    },
    {
      "column": 7,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.initialize",
      "line": 208,
      "method": "initialize",
      "native": false
    }
  ]
}
{
  "date": "Wed Dec 17 2025 15:05:30 GMT-0600 (hora estándar central)",
  "error": {
    "code": "ER_FK_INCOMPATIBLE_COLUMNS",
    "executionTime": 5,
    "originalError": {
      "code": "ER_FK_INCOMPATIBLE_COLUMNS",
      "errno": 3780,
      "message": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n          \n          INDEX idx_inventory_product (product_id),\n          INDEX idx_inventory_type (type),\n          INDEX idx_inventory_reference (reference_type, reference_id),\n          INDEX idx_inventory_user (user_id),\n          INDEX idx_inventory_created_at (created_at),\n          FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE,\n          FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\n        ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci\n        ",
      "sqlMessage": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sqlState": "HY000"
    },
    "params": [],
    "queryId": "query-1766005530241-sabxqsv",
    "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TI"
  },
  "level": "error",
  "message": "unhandledRejection: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\nError: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "os": {
    "loadavg": [
      0,
      0,
      0
    ],
    "uptime": 177304.234
  },
  "process": {
    "argv": [
      "H:\\NODEJS\\node.exe",
      "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\server.js"
    ],
    "cwd": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend",
    "execPath": "H:\\NODEJS\\node.exe",
    "gid": null,
    "memoryUsage": {
      "arrayBuffers": 70287,
      "external": 2475524,
      "heapTotal": 59768832,
      "heapUsed": 28916368,
      "rss": 94916608
    },
    "pid": 17344,
    "uid": null,
    "version": "v22.19.0"
  },
  "rejection": true,
  "stack": "Error: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "timestamp": "2025-12-17 15:05:30.249",
  "trace": [
    {
      "column": 29,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "DatabaseManager.query",
      "line": 915,
      "method": "query",
      "native": false
    },
    {
      "column": 5,
      "file": "node:internal/process/task_queues",
      "function": "process.processTicksAndRejections",
      "line": 105,
      "method": "processTicksAndRejections",
      "native": false
    },
    {
      "column": 9,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.createTablesIfNotExist",
      "line": 625,
      "method": "createTablesIfNotExist",
      "native": false
    },
    {
      "column": 7,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.initialize",
      "line": 208,
      "method": "initialize",
      "native": false
    }
  ]
}
{
  "date": "Wed Dec 17 2025 15:09:22 GMT-0600 (hora estándar central)",
  "error": {
    "code": "ER_FK_INCOMPATIBLE_COLUMNS",
    "executionTime": 6,
    "originalError": {
      "code": "ER_FK_INCOMPATIBLE_COLUMNS",
      "errno": 3780,
      "message": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n          \n          INDEX idx_inventory_product (product_id),\n          INDEX idx_inventory_type (type),\n          INDEX idx_inventory_reference (reference_type, reference_id),\n          INDEX idx_inventory_user (user_id),\n          INDEX idx_inventory_created_at (created_at),\n          FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE,\n          FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\n        ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci\n        ",
      "sqlMessage": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sqlState": "HY000"
    },
    "params": [],
    "queryId": "query-1766005762108-vx7c2jv",
    "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TI"
  },
  "level": "error",
  "message": "unhandledRejection: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\nError: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "os": {
    "loadavg": [
      0,
      0,
      0
    ],
    "uptime": 177536.109
  },
  "process": {
    "argv": [
      "H:\\NODEJS\\node.exe",
      "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\server.js"
    ],
    "cwd": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend",
    "execPath": "H:\\NODEJS\\node.exe",
    "gid": null,
    "memoryUsage": {
      "arrayBuffers": 469535,
      "external": 2905435,
      "heapTotal": 64888832,
      "heapUsed": 37322528,
      "rss": 102400000
    },
    "pid": 19928,
    "uid": null,
    "version": "v22.19.0"
  },
  "rejection": true,
  "stack": "Error: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "timestamp": "2025-12-17 15:09:22.124",
  "trace": [
    {
      "column": 29,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "DatabaseManager.query",
      "line": 915,
      "method": "query",
      "native": false
    },
    {
      "column": 5,
      "file": "node:internal/process/task_queues",
      "function": "process.processTicksAndRejections",
      "line": 105,
      "method": "processTicksAndRejections",
      "native": false
    },
    {
      "column": 9,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.createTablesIfNotExist",
      "line": 625,
      "method": "createTablesIfNotExist",
      "native": false
    },
    {
      "column": 7,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.initialize",
      "line": 208,
      "method": "initialize",
      "native": false
    }
  ]
}
{
  "date": "Wed Dec 17 2025 15:13:49 GMT-0600 (hora estándar central)",
  "error": {
    "code": "ER_FK_INCOMPATIBLE_COLUMNS",
    "executionTime": 5,
    "originalError": {
      "code": "ER_FK_INCOMPATIBLE_COLUMNS",
      "errno": 3780,
      "message": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n          \n          INDEX idx_inventory_product (product_id),\n          INDEX idx_inventory_type (type),\n          INDEX idx_inventory_reference (reference_type, reference_id),\n          INDEX idx_inventory_user (user_id),\n          INDEX idx_inventory_created_at (created_at),\n          FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE,\n          FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\n        ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci\n        ",
      "sqlMessage": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sqlState": "HY000"
    },
    "params": [],
    "queryId": "query-1766006029041-t9gpran",
    "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TI"
  },
  "level": "error",
  "message": "unhandledRejection: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\nError: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "os": {
    "loadavg": [
      0,
      0,
      0
    ],
    "uptime": 177803.031
  },
  "process": {
    "argv": [
      "H:\\NODEJS\\node.exe",
      "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\server.js"
    ],
    "cwd": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend",
    "execPath": "H:\\NODEJS\\node.exe",
    "gid": null,
    "memoryUsage": {
      "arrayBuffers": 793128,
      "external": 3229028,
      "heapTotal": 64888832,
      "heapUsed": 41346192,
      "rss": 98275328
    },
    "pid": 22776,
    "uid": null,
    "version": "v22.19.0"
  },
  "rejection": true,
  "stack": "Error: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "timestamp": "2025-12-17 15:13:49.048",
  "trace": [
    {
      "column": 29,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "DatabaseManager.query",
      "line": 915,
      "method": "query",
      "native": false
    },
    {
      "column": 5,
      "file": "node:internal/process/task_queues",
      "function": "process.processTicksAndRejections",
      "line": 105,
      "method": "processTicksAndRejections",
      "native": false
    },
    {
      "column": 9,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.createTablesIfNotExist",
      "line": 625,
      "method": "createTablesIfNotExist",
      "native": false
    },
    {
      "column": 7,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.initialize",
      "line": 208,
      "method": "initialize",
      "native": false
    }
  ]
}
{
  "date": "Wed Dec 17 2025 15:15:32 GMT-0600 (hora estándar central)",
  "error": {
    "code": "ER_FK_INCOMPATIBLE_COLUMNS",
    "executionTime": 3,
    "originalError": {
      "code": "ER_FK_INCOMPATIBLE_COLUMNS",
      "errno": 3780,
      "message": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n          \n          INDEX idx_inventory_product (product_id),\n          INDEX idx_inventory_type (type),\n          INDEX idx_inventory_reference (reference_type, reference_id),\n          INDEX idx_inventory_user (user_id),\n          INDEX idx_inventory_created_at (created_at),\n          FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE,\n          FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\n        ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci\n        ",
      "sqlMessage": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sqlState": "HY000"
    },
    "params": [],
    "queryId": "query-1766006132268-o7d97yj",
    "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TI"
  },
  "level": "error",
  "message": "unhandledRejection: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\nError: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "os": {
    "loadavg": [
      0,
      0,
      0
    ],
    "uptime": 177906.25
  },
  "process": {
    "argv": [
      "H:\\NODEJS\\node.exe",
      "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\server.js"
    ],
    "cwd": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend",
    "execPath": "H:\\NODEJS\\node.exe",
    "gid": null,
    "memoryUsage": {
      "arrayBuffers": 469335,
      "external": 2905235,
      "heapTotal": 64888832,
      "heapUsed": 37382504,
      "rss": 102572032
    },
    "pid": 4012,
    "uid": null,
    "version": "v22.19.0"
  },
  "rejection": true,
  "stack": "Error: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "timestamp": "2025-12-17 15:15:32.274",
  "trace": [
    {
      "column": 29,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "DatabaseManager.query",
      "line": 915,
      "method": "query",
      "native": false
    },
    {
      "column": 5,
      "file": "node:internal/process/task_queues",
      "function": "process.processTicksAndRejections",
      "line": 105,
      "method": "processTicksAndRejections",
      "native": false
    },
    {
      "column": 9,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.createTablesIfNotExist",
      "line": 625,
      "method": "createTablesIfNotExist",
      "native": false
    },
    {
      "column": 7,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.initialize",
      "line": 208,
      "method": "initialize",
      "native": false
    }
  ]
}
{
  "date": "Wed Dec 17 2025 15:16:22 GMT-0600 (hora estándar central)",
  "error": {
    "code": "ER_FK_INCOMPATIBLE_COLUMNS",
    "executionTime": 4,
    "originalError": {
      "code": "ER_FK_INCOMPATIBLE_COLUMNS",
      "errno": 3780,
      "message": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n          \n          INDEX idx_inventory_product (product_id),\n          INDEX idx_inventory_type (type),\n          INDEX idx_inventory_reference (reference_type, reference_id),\n          INDEX idx_inventory_user (user_id),\n          INDEX idx_inventory_created_at (created_at),\n          FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE,\n          FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\n        ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci\n        ",
      "sqlMessage": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sqlState": "HY000"
    },
    "params": [],
    "queryId": "query-1766006182166-9ah5jn7",
    "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TI"
  },
  "level": "error",
  "message": "unhandledRejection: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\nError: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "os": {
    "loadavg": [
      0,
      0,
      0
    ],
    "uptime": 177956.156
  },
  "process": {
    "argv": [
      "H:\\NODEJS\\node.exe",
      "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\server.js"
    ],
    "cwd": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend",
    "execPath": "H:\\NODEJS\\node.exe",
    "gid": null,
    "memoryUsage": {
      "arrayBuffers": 469335,
      "external": 2905235,
      "heapTotal": 64888832,
      "heapUsed": 37354632,
      "rss": 105877504
    },
    "pid": 7800,
    "uid": null,
    "version": "v22.19.0"
  },
  "rejection": true,
  "stack": "Error: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "timestamp": "2025-12-17 15:16:22.172",
  "trace": [
    {
      "column": 29,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "DatabaseManager.query",
      "line": 915,
      "method": "query",
      "native": false
    },
    {
      "column": 5,
      "file": "node:internal/process/task_queues",
      "function": "process.processTicksAndRejections",
      "line": 105,
      "method": "processTicksAndRejections",
      "native": false
    },
    {
      "column": 9,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.createTablesIfNotExist",
      "line": 625,
      "method": "createTablesIfNotExist",
      "native": false
    },
    {
      "column": 7,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.initialize",
      "line": 208,
      "method": "initialize",
      "native": false
    }
  ]
}
{
  "date": "Wed Dec 17 2025 15:16:55 GMT-0600 (hora estándar central)",
  "error": {
    "code": "ER_FK_INCOMPATIBLE_COLUMNS",
    "executionTime": 4,
    "originalError": {
      "code": "ER_FK_INCOMPATIBLE_COLUMNS",
      "errno": 3780,
      "message": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n          \n          INDEX idx_inventory_product (product_id),\n          INDEX idx_inventory_type (type),\n          INDEX idx_inventory_reference (reference_type, reference_id),\n          INDEX idx_inventory_user (user_id),\n          INDEX idx_inventory_created_at (created_at),\n          FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE,\n          FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\n        ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci\n        ",
      "sqlMessage": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sqlState": "HY000"
    },
    "params": [],
    "queryId": "query-1766006215027-4jwhmrm",
    "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TI"
  },
  "level": "error",
  "message": "unhandledRejection: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\nError: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "os": {
    "loadavg": [
      0,
      0,
      0
    ],
    "uptime": 177989.015
  },
  "process": {
    "argv": [
      "H:\\NODEJS\\node.exe",
      "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\server.js"
    ],
    "cwd": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend",
    "execPath": "H:\\NODEJS\\node.exe",
    "gid": null,
    "memoryUsage": {
      "arrayBuffers": 469335,
      "external": 2905235,
      "heapTotal": 64626688,
      "heapUsed": 37241912,
      "rss": 105562112
    },
    "pid": 23644,
    "uid": null,
    "version": "v22.19.0"
  },
  "rejection": true,
  "stack": "Error: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "timestamp": "2025-12-17 15:16:55.034",
  "trace": [
    {
      "column": 29,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "DatabaseManager.query",
      "line": 915,
      "method": "query",
      "native": false
    },
    {
      "column": 5,
      "file": "node:internal/process/task_queues",
      "function": "process.processTicksAndRejections",
      "line": 105,
      "method": "processTicksAndRejections",
      "native": false
    },
    {
      "column": 9,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.createTablesIfNotExist",
      "line": 625,
      "method": "createTablesIfNotExist",
      "native": false
    },
    {
      "column": 7,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.initialize",
      "line": 208,
      "method": "initialize",
      "native": false
    }
  ]
}
{
  "date": "Wed Dec 17 2025 15:41:46 GMT-0600 (hora estándar central)",
  "error": {
    "code": "ER_FK_INCOMPATIBLE_COLUMNS",
    "executionTime": 4,
    "originalError": {
      "code": "ER_FK_INCOMPATIBLE_COLUMNS",
      "errno": 3780,
      "message": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n          \n          INDEX idx_inventory_product (product_id),\n          INDEX idx_inventory_type (type),\n          INDEX idx_inventory_reference (reference_type, reference_id),\n          INDEX idx_inventory_user (user_id),\n          INDEX idx_inventory_created_at (created_at),\n          FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE,\n          FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\n        ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci\n        ",
      "sqlMessage": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sqlState": "HY000"
    },
    "params": [],
    "queryId": "query-1766007706729-rlxs0ww",
    "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TI"
  },
  "level": "error",
  "message": "unhandledRejection: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\nError: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "os": {
    "loadavg": [
      0,
      0,
      0
    ],
    "uptime": 179480.718
  },
  "process": {
    "argv": [
      "H:\\NODEJS\\node.exe",
      "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\server.js"
    ],
    "cwd": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend",
    "execPath": "H:\\NODEJS\\node.exe",
    "gid": null,
    "memoryUsage": {
      "arrayBuffers": 469335,
      "external": 2905235,
      "heapTotal": 64888832,
      "heapUsed": 37603480,
      "rss": 103608320
    },
    "pid": 3028,
    "uid": null,
    "version": "v22.19.0"
  },
  "rejection": true,
  "stack": "Error: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "timestamp": "2025-12-17 15:41:46.736",
  "trace": [
    {
      "column": 29,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "DatabaseManager.query",
      "line": 915,
      "method": "query",
      "native": false
    },
    {
      "column": 5,
      "file": "node:internal/process/task_queues",
      "function": "process.processTicksAndRejections",
      "line": 105,
      "method": "processTicksAndRejections",
      "native": false
    },
    {
      "column": 9,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.createTablesIfNotExist",
      "line": 625,
      "method": "createTablesIfNotExist",
      "native": false
    },
    {
      "column": 7,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.initialize",
      "line": 208,
      "method": "initialize",
      "native": false
    }
  ]
}
{
  "date": "Wed Dec 17 2025 15:42:21 GMT-0600 (hora estándar central)",
  "error": {
    "code": "ER_FK_INCOMPATIBLE_COLUMNS",
    "executionTime": 3,
    "originalError": {
      "code": "ER_FK_INCOMPATIBLE_COLUMNS",
      "errno": 3780,
      "message": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n          \n          INDEX idx_inventory_product (product_id),\n          INDEX idx_inventory_type (type),\n          INDEX idx_inventory_reference (reference_type, reference_id),\n          INDEX idx_inventory_user (user_id),\n          INDEX idx_inventory_created_at (created_at),\n          FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE,\n          FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\n        ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci\n        ",
      "sqlMessage": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sqlState": "HY000"
    },
    "params": [],
    "queryId": "query-1766007741263-2el8tpu",
    "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TI"
  },
  "level": "error",
  "message": "unhandledRejection: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\nError: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "os": {
    "loadavg": [
      0,
      0,
      0
    ],
    "uptime": 179515.25
  },
  "process": {
    "argv": [
      "H:\\NODEJS\\node.exe",
      "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\server.js"
    ],
    "cwd": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend",
    "execPath": "H:\\NODEJS\\node.exe",
    "gid": null,
    "memoryUsage": {
      "arrayBuffers": 469335,
      "external": 2905235,
      "heapTotal": 64888832,
      "heapUsed": 37394480,
      "rss": 102973440
    },
    "pid": 23320,
    "uid": null,
    "version": "v22.19.0"
  },
  "rejection": true,
  "stack": "Error: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "timestamp": "2025-12-17 15:42:21.270",
  "trace": [
    {
      "column": 29,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "DatabaseManager.query",
      "line": 915,
      "method": "query",
      "native": false
    },
    {
      "column": 5,
      "file": "node:internal/process/task_queues",
      "function": "process.processTicksAndRejections",
      "line": 105,
      "method": "processTicksAndRejections",
      "native": false
    },
    {
      "column": 9,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.createTablesIfNotExist",
      "line": 625,
      "method": "createTablesIfNotExist",
      "native": false
    },
    {
      "column": 7,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.initialize",
      "line": 208,
      "method": "initialize",
      "native": false
    }
  ]
}
{
  "date": "Wed Dec 17 2025 15:42:22 GMT-0600 (hora estándar central)",
  "error": {
    "code": "ER_FK_INCOMPATIBLE_COLUMNS",
    "executionTime": 6,
    "originalError": {
      "code": "ER_FK_INCOMPATIBLE_COLUMNS",
      "errno": 3780,
      "message": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n          \n          INDEX idx_inventory_product (product_id),\n          INDEX idx_inventory_type (type),\n          INDEX idx_inventory_reference (reference_type, reference_id),\n          INDEX idx_inventory_user (user_id),\n          INDEX idx_inventory_created_at (created_at),\n          FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE,\n          FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\n        ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci\n        ",
      "sqlMessage": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sqlState": "HY000"
    },
    "params": [],
    "queryId": "query-1766007742567-vj25ko8",
    "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TI"
  },
  "level": "error",
  "message": "unhandledRejection: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\nError: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "os": {
    "loadavg": [
      0,
      0,
      0
    ],
    "uptime": 179516.562
  },
  "process": {
    "argv": [
      "H:\\NODEJS\\node.exe",
      "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\server.js"
    ],
    "cwd": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend",
    "execPath": "H:\\NODEJS\\node.exe",
    "gid": null,
    "memoryUsage": {
      "arrayBuffers": 469335,
      "external": 2905235,
      "heapTotal": 64888832,
      "heapUsed": 37369376,
      "rss": 102813696
    },
    "pid": 15820,
    "uid": null,
    "version": "v22.19.0"
  },
  "rejection": true,
  "stack": "Error: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "timestamp": "2025-12-17 15:42:22.576",
  "trace": [
    {
      "column": 29,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "DatabaseManager.query",
      "line": 915,
      "method": "query",
      "native": false
    },
    {
      "column": 5,
      "file": "node:internal/process/task_queues",
      "function": "process.processTicksAndRejections",
      "line": 105,
      "method": "processTicksAndRejections",
      "native": false
    },
    {
      "column": 9,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.createTablesIfNotExist",
      "line": 625,
      "method": "createTablesIfNotExist",
      "native": false
    },
    {
      "column": 7,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.initialize",
      "line": 208,
      "method": "initialize",
      "native": false
    }
  ]
}
{
  "date": "Wed Dec 17 2025 15:42:23 GMT-0600 (hora estándar central)",
  "error": {
    "code": "ER_FK_INCOMPATIBLE_COLUMNS",
    "executionTime": 3,
    "originalError": {
      "code": "ER_FK_INCOMPATIBLE_COLUMNS",
      "errno": 3780,
      "message": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n          \n          INDEX idx_inventory_product (product_id),\n          INDEX idx_inventory_type (type),\n          INDEX idx_inventory_reference (reference_type, reference_id),\n          INDEX idx_inventory_user (user_id),\n          INDEX idx_inventory_created_at (created_at),\n          FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE,\n          FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\n        ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci\n        ",
      "sqlMessage": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sqlState": "HY000"
    },
    "params": [],
    "queryId": "query-1766007743881-s402axu",
    "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TI"
  },
  "level": "error",
  "message": "unhandledRejection: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\nError: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "os": {
    "loadavg": [
      0,
      0,
      0
    ],
    "uptime": 179517.875
  },
  "process": {
    "argv": [
      "H:\\NODEJS\\node.exe",
      "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\server.js"
    ],
    "cwd": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend",
    "execPath": "H:\\NODEJS\\node.exe",
    "gid": null,
    "memoryUsage": {
      "arrayBuffers": 469335,
      "external": 2905235,
      "heapTotal": 65150976,
      "heapUsed": 37902552,
      "rss": 103043072
    },
    "pid": 6292,
    "uid": null,
    "version": "v22.19.0"
  },
  "rejection": true,
  "stack": "Error: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "timestamp": "2025-12-17 15:42:23.887",
  "trace": [
    {
      "column": 29,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "DatabaseManager.query",
      "line": 915,
      "method": "query",
      "native": false
    },
    {
      "column": 5,
      "file": "node:internal/process/task_queues",
      "function": "process.processTicksAndRejections",
      "line": 105,
      "method": "processTicksAndRejections",
      "native": false
    },
    {
      "column": 9,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.createTablesIfNotExist",
      "line": 625,
      "method": "createTablesIfNotExist",
      "native": false
    },
    {
      "column": 7,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.initialize",
      "line": 208,
      "method": "initialize",
      "native": false
    }
  ]
}
{
  "date": "Wed Dec 17 2025 15:42:45 GMT-0600 (hora estándar central)",
  "error": {
    "code": "ER_FK_INCOMPATIBLE_COLUMNS",
    "executionTime": 5,
    "originalError": {
      "code": "ER_FK_INCOMPATIBLE_COLUMNS",
      "errno": 3780,
      "message": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n          \n          INDEX idx_inventory_product (product_id),\n          INDEX idx_inventory_type (type),\n          INDEX idx_inventory_reference (reference_type, reference_id),\n          INDEX idx_inventory_user (user_id),\n          INDEX idx_inventory_created_at (created_at),\n          FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE,\n          FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\n        ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci\n        ",
      "sqlMessage": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sqlState": "HY000"
    },
    "params": [],
    "queryId": "query-1766007765287-8tbjjqm",
    "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TI"
  },
  "level": "error",
  "message": "unhandledRejection: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\nError: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "os": {
    "loadavg": [
      0,
      0,
      0
    ],
    "uptime": 179539.265
  },
  "process": {
    "argv": [
      "H:\\NODEJS\\node.exe",
      "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\server.js"
    ],
    "cwd": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend",
    "execPath": "H:\\NODEJS\\node.exe",
    "gid": null,
    "memoryUsage": {
      "arrayBuffers": 469335,
      "external": 2905235,
      "heapTotal": 64888832,
      "heapUsed": 37650344,
      "rss": 103272448
    },
    "pid": 11688,
    "uid": null,
    "version": "v22.19.0"
  },
  "rejection": true,
  "stack": "Error: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "timestamp": "2025-12-17 15:42:45.295",
  "trace": [
    {
      "column": 29,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "DatabaseManager.query",
      "line": 915,
      "method": "query",
      "native": false
    },
    {
      "column": 5,
      "file": "node:internal/process/task_queues",
      "function": "process.processTicksAndRejections",
      "line": 105,
      "method": "processTicksAndRejections",
      "native": false
    },
    {
      "column": 9,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.createTablesIfNotExist",
      "line": 625,
      "method": "createTablesIfNotExist",
      "native": false
    },
    {
      "column": 7,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.initialize",
      "line": 208,
      "method": "initialize",
      "native": false
    }
  ]
}
{
  "date": "Wed Dec 17 2025 15:43:00 GMT-0600 (hora estándar central)",
  "error": {
    "code": "ER_FK_INCOMPATIBLE_COLUMNS",
    "executionTime": 3,
    "originalError": {
      "code": "ER_FK_INCOMPATIBLE_COLUMNS",
      "errno": 3780,
      "message": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n          \n          INDEX idx_inventory_product (product_id),\n          INDEX idx_inventory_type (type),\n          INDEX idx_inventory_reference (reference_type, reference_id),\n          INDEX idx_inventory_user (user_id),\n          INDEX idx_inventory_created_at (created_at),\n          FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE,\n          FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\n        ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci\n        ",
      "sqlMessage": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sqlState": "HY000"
    },
    "params": [],
    "queryId": "query-1766007780899-bod57nr",
    "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TI"
  },
  "level": "error",
  "message": "unhandledRejection: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\nError: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "os": {
    "loadavg": [
      0,
      0,
      0
    ],
    "uptime": 179554.89
  },
  "process": {
    "argv": [
      "H:\\NODEJS\\node.exe",
      "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\server.js"
    ],
    "cwd": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend",
    "execPath": "H:\\NODEJS\\node.exe",
    "gid": null,
    "memoryUsage": {
      "arrayBuffers": 469335,
      "external": 2905235,
      "heapTotal": 64888832,
      "heapUsed": 37495240,
      "rss": 103116800
    },
    "pid": 6636,
    "uid": null,
    "version": "v22.19.0"
  },
  "rejection": true,
  "stack": "Error: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "timestamp": "2025-12-17 15:43:00.904",
  "trace": [
    {
      "column": 29,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "DatabaseManager.query",
      "line": 915,
      "method": "query",
      "native": false
    },
    {
      "column": 5,
      "file": "node:internal/process/task_queues",
      "function": "process.processTicksAndRejections",
      "line": 105,
      "method": "processTicksAndRejections",
      "native": false
    },
    {
      "column": 9,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.createTablesIfNotExist",
      "line": 625,
      "method": "createTablesIfNotExist",
      "native": false
    },
    {
      "column": 7,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.initialize",
      "line": 208,
      "method": "initialize",
      "native": false
    }
  ]
}
{
  "date": "Wed Dec 17 2025 15:43:35 GMT-0600 (hora estándar central)",
  "error": {
    "code": "ER_FK_INCOMPATIBLE_COLUMNS",
    "executionTime": 3,
    "originalError": {
      "code": "ER_FK_INCOMPATIBLE_COLUMNS",
      "errno": 3780,
      "message": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n          \n          INDEX idx_inventory_product (product_id),\n          INDEX idx_inventory_type (type),\n          INDEX idx_inventory_reference (reference_type, reference_id),\n          INDEX idx_inventory_user (user_id),\n          INDEX idx_inventory_created_at (created_at),\n          FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE,\n          FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\n        ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci\n        ",
      "sqlMessage": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sqlState": "HY000"
    },
    "params": [],
    "queryId": "query-1766007815316-wvzl8z4",
    "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TI"
  },
  "level": "error",
  "message": "unhandledRejection: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\nError: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "os": {
    "loadavg": [
      0,
      0,
      0
    ],
    "uptime": 179589.312
  },
  "process": {
    "argv": [
      "H:\\NODEJS\\node.exe",
      "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\server.js"
    ],
    "cwd": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend",
    "execPath": "H:\\NODEJS\\node.exe",
    "gid": null,
    "memoryUsage": {
      "arrayBuffers": 469335,
      "external": 2905235,
      "heapTotal": 64888832,
      "heapUsed": 37796408,
      "rss": 103059456
    },
    "pid": 17028,
    "uid": null,
    "version": "v22.19.0"
  },
  "rejection": true,
  "stack": "Error: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "timestamp": "2025-12-17 15:43:35.322",
  "trace": [
    {
      "column": 29,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "DatabaseManager.query",
      "line": 915,
      "method": "query",
      "native": false
    },
    {
      "column": 5,
      "file": "node:internal/process/task_queues",
      "function": "process.processTicksAndRejections",
      "line": 105,
      "method": "processTicksAndRejections",
      "native": false
    },
    {
      "column": 9,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.createTablesIfNotExist",
      "line": 625,
      "method": "createTablesIfNotExist",
      "native": false
    },
    {
      "column": 7,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.initialize",
      "line": 208,
      "method": "initialize",
      "native": false
    }
  ]
}
{
  "date": "Wed Dec 17 2025 15:44:16 GMT-0600 (hora estándar central)",
  "error": {
    "code": "ER_FK_INCOMPATIBLE_COLUMNS",
    "executionTime": 4,
    "originalError": {
      "code": "ER_FK_INCOMPATIBLE_COLUMNS",
      "errno": 3780,
      "message": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n          \n          INDEX idx_inventory_product (product_id),\n          INDEX idx_inventory_type (type),\n          INDEX idx_inventory_reference (reference_type, reference_id),\n          INDEX idx_inventory_user (user_id),\n          INDEX idx_inventory_created_at (created_at),\n          FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE,\n          FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\n        ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci\n        ",
      "sqlMessage": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sqlState": "HY000"
    },
    "params": [],
    "queryId": "query-1766007856421-d5xcpb2",
    "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TI"
  },
  "level": "error",
  "message": "unhandledRejection: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\nError: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "os": {
    "loadavg": [
      0,
      0,
      0
    ],
    "uptime": 179630.406
  },
  "process": {
    "argv": [
      "H:\\NODEJS\\node.exe",
      "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\server.js"
    ],
    "cwd": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend",
    "execPath": "H:\\NODEJS\\node.exe",
    "gid": null,
    "memoryUsage": {
      "arrayBuffers": 469335,
      "external": 2905235,
      "heapTotal": 64888832,
      "heapUsed": 37564928,
      "rss": 105086976
    },
    "pid": 18652,
    "uid": null,
    "version": "v22.19.0"
  },
  "rejection": true,
  "stack": "Error: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "timestamp": "2025-12-17 15:44:16.427",
  "trace": [
    {
      "column": 29,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "DatabaseManager.query",
      "line": 915,
      "method": "query",
      "native": false
    },
    {
      "column": 5,
      "file": "node:internal/process/task_queues",
      "function": "process.processTicksAndRejections",
      "line": 105,
      "method": "processTicksAndRejections",
      "native": false
    },
    {
      "column": 9,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.createTablesIfNotExist",
      "line": 625,
      "method": "createTablesIfNotExist",
      "native": false
    },
    {
      "column": 7,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.initialize",
      "line": 208,
      "method": "initialize",
      "native": false
    }
  ]
}
{
  "date": "Wed Dec 17 2025 15:44:22 GMT-0600 (hora estándar central)",
  "error": {
    "code": "ER_FK_INCOMPATIBLE_COLUMNS",
    "executionTime": 3,
    "originalError": {
      "code": "ER_FK_INCOMPATIBLE_COLUMNS",
      "errno": 3780,
      "message": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n          \n          INDEX idx_inventory_product (product_id),\n          INDEX idx_inventory_type (type),\n          INDEX idx_inventory_reference (reference_type, reference_id),\n          INDEX idx_inventory_user (user_id),\n          INDEX idx_inventory_created_at (created_at),\n          FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE,\n          FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\n        ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci\n        ",
      "sqlMessage": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sqlState": "HY000"
    },
    "params": [],
    "queryId": "query-1766007862274-k1ypdkm",
    "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TI"
  },
  "level": "error",
  "message": "unhandledRejection: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\nError: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "os": {
    "loadavg": [
      0,
      0,
      0
    ],
    "uptime": 179636.265
  },
  "process": {
    "argv": [
      "H:\\NODEJS\\node.exe",
      "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\server.js"
    ],
    "cwd": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend",
    "execPath": "H:\\NODEJS\\node.exe",
    "gid": null,
    "memoryUsage": {
      "arrayBuffers": 469335,
      "external": 2905235,
      "heapTotal": 65150976,
      "heapUsed": 37466736,
      "rss": 102486016
    },
    "pid": 11284,
    "uid": null,
    "version": "v22.19.0"
  },
  "rejection": true,
  "stack": "Error: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "timestamp": "2025-12-17 15:44:22.279",
  "trace": [
    {
      "column": 29,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "DatabaseManager.query",
      "line": 915,
      "method": "query",
      "native": false
    },
    {
      "column": 5,
      "file": "node:internal/process/task_queues",
      "function": "process.processTicksAndRejections",
      "line": 105,
      "method": "processTicksAndRejections",
      "native": false
    },
    {
      "column": 9,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.createTablesIfNotExist",
      "line": 625,
      "method": "createTablesIfNotExist",
      "native": false
    },
    {
      "column": 7,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.initialize",
      "line": 208,
      "method": "initialize",
      "native": false
    }
  ]
}
{
  "date": "Wed Dec 17 2025 16:32:27 GMT-0600 (hora estándar central)",
  "error": {
    "code": "ER_FK_INCOMPATIBLE_COLUMNS",
    "executionTime": 4,
    "originalError": {
      "code": "ER_FK_INCOMPATIBLE_COLUMNS",
      "errno": 3780,
      "message": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n          \n          INDEX idx_inventory_product (product_id),\n          INDEX idx_inventory_type (type),\n          INDEX idx_inventory_reference (reference_type, reference_id),\n          INDEX idx_inventory_user (user_id),\n          INDEX idx_inventory_created_at (created_at),\n          FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE,\n          FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\n        ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci\n        ",
      "sqlMessage": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sqlState": "HY000"
    },
    "params": [],
    "queryId": "query-1766010747119-urfxf4a",
    "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TI"
  },
  "level": "error",
  "message": "unhandledRejection: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\nError: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "os": {
    "loadavg": [
      0,
      0,
      0
    ],
    "uptime": 182521.125
  },
  "process": {
    "argv": [
      "H:\\NODEJS\\node.exe",
      "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\server.js"
    ],
    "cwd": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend",
    "execPath": "H:\\NODEJS\\node.exe",
    "gid": null,
    "memoryUsage": {
      "arrayBuffers": 689804,
      "external": 3125704,
      "heapTotal": 67510272,
      "heapUsed": 42964728,
      "rss": 111661056
    },
    "pid": 21432,
    "uid": null,
    "version": "v22.19.0"
  },
  "rejection": true,
  "stack": "Error: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "timestamp": "2025-12-17 16:32:27.141",
  "trace": [
    {
      "column": 29,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "DatabaseManager.query",
      "line": 915,
      "method": "query",
      "native": false
    },
    {
      "column": 5,
      "file": "node:internal/process/task_queues",
      "function": "process.processTicksAndRejections",
      "line": 105,
      "method": "processTicksAndRejections",
      "native": false
    },
    {
      "column": 9,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.createTablesIfNotExist",
      "line": 625,
      "method": "createTablesIfNotExist",
      "native": false
    },
    {
      "column": 7,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.initialize",
      "line": 208,
      "method": "initialize",
      "native": false
    }
  ]
}
{
  "date": "Wed Dec 17 2025 16:33:23 GMT-0600 (hora estándar central)",
  "error": {
    "code": "ER_FK_INCOMPATIBLE_COLUMNS",
    "executionTime": 2,
    "originalError": {
      "code": "ER_FK_INCOMPATIBLE_COLUMNS",
      "errno": 3780,
      "message": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n          \n          INDEX idx_inventory_product (product_id),\n          INDEX idx_inventory_type (type),\n          INDEX idx_inventory_reference (reference_type, reference_id),\n          INDEX idx_inventory_user (user_id),\n          INDEX idx_inventory_created_at (created_at),\n          FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE,\n          FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\n        ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci\n        ",
      "sqlMessage": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sqlState": "HY000"
    },
    "params": [],
    "queryId": "query-1766010803656-3e1lmkc",
    "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TI"
  },
  "level": "error",
  "message": "unhandledRejection: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\nError: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "os": {
    "loadavg": [
      0,
      0,
      0
    ],
    "uptime": 182577.64
  },
  "process": {
    "argv": [
      "H:\\NODEJS\\node.exe",
      "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\server.js"
    ],
    "cwd": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend",
    "execPath": "H:\\NODEJS\\node.exe",
    "gid": null,
    "memoryUsage": {
      "arrayBuffers": 502903,
      "external": 2938803,
      "heapTotal": 70393856,
      "heapUsed": 42338016,
      "rss": 114995200
    },
    "pid": 3220,
    "uid": null,
    "version": "v22.19.0"
  },
  "rejection": true,
  "stack": "Error: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "timestamp": "2025-12-17 16:33:23.662",
  "trace": [
    {
      "column": 29,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "DatabaseManager.query",
      "line": 915,
      "method": "query",
      "native": false
    },
    {
      "column": 5,
      "file": "node:internal/process/task_queues",
      "function": "process.processTicksAndRejections",
      "line": 105,
      "method": "processTicksAndRejections",
      "native": false
    },
    {
      "column": 9,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.createTablesIfNotExist",
      "line": 625,
      "method": "createTablesIfNotExist",
      "native": false
    },
    {
      "column": 7,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.initialize",
      "line": 208,
      "method": "initialize",
      "native": false
    }
  ]
}
{
  "date": "Wed Dec 17 2025 16:35:00 GMT-0600 (hora estándar central)",
  "error": {
    "code": "ER_FK_INCOMPATIBLE_COLUMNS",
    "executionTime": 5,
    "originalError": {
      "code": "ER_FK_INCOMPATIBLE_COLUMNS",
      "errno": 3780,
      "message": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n          \n          INDEX idx_inventory_product (product_id),\n          INDEX idx_inventory_type (type),\n          INDEX idx_inventory_reference (reference_type, reference_id),\n          INDEX idx_inventory_user (user_id),\n          INDEX idx_inventory_created_at (created_at),\n          FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE,\n          FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\n        ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci\n        ",
      "sqlMessage": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sqlState": "HY000"
    },
    "params": [],
    "queryId": "query-1766010900214-8w47mf0",
    "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TI"
  },
  "level": "error",
  "message": "unhandledRejection: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\nError: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "os": {
    "loadavg": [
      0,
      0,
      0
    ],
    "uptime": 182674.203
  },
  "process": {
    "argv": [
      "H:\\NODEJS\\node.exe",
      "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\server.js"
    ],
    "cwd": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend",
    "execPath": "H:\\NODEJS\\node.exe",
    "gid": null,
    "memoryUsage": {
      "arrayBuffers": 502303,
      "external": 2938203,
      "heapTotal": 70393856,
      "heapUsed": 42204952,
      "rss": 118140928
    },
    "pid": 12596,
    "uid": null,
    "version": "v22.19.0"
  },
  "rejection": true,
  "stack": "Error: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "timestamp": "2025-12-17 16:35:00.222",
  "trace": [
    {
      "column": 29,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "DatabaseManager.query",
      "line": 915,
      "method": "query",
      "native": false
    },
    {
      "column": 5,
      "file": "node:internal/process/task_queues",
      "function": "process.processTicksAndRejections",
      "line": 105,
      "method": "processTicksAndRejections",
      "native": false
    },
    {
      "column": 9,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.createTablesIfNotExist",
      "line": 625,
      "method": "createTablesIfNotExist",
      "native": false
    },
    {
      "column": 7,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.initialize",
      "line": 208,
      "method": "initialize",
      "native": false
    }
  ]
}
{
  "date": "Wed Dec 17 2025 16:49:01 GMT-0600 (hora estándar central)",
  "error": {
    "code": "ER_FK_INCOMPATIBLE_COLUMNS",
    "executionTime": 6,
    "originalError": {
      "code": "ER_FK_INCOMPATIBLE_COLUMNS",
      "errno": 3780,
      "message": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n          \n          INDEX idx_inventory_product (product_id),\n          INDEX idx_inventory_type (type),\n          INDEX idx_inventory_reference (reference_type, reference_id),\n          INDEX idx_inventory_user (user_id),\n          INDEX idx_inventory_created_at (created_at),\n          FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE,\n          FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\n        ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci\n        ",
      "sqlMessage": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sqlState": "HY000"
    },
    "params": [],
    "queryId": "query-1766011741695-n8tmddm",
    "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TI"
  },
  "level": "error",
  "message": "unhandledRejection: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\nError: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "os": {
    "loadavg": [
      0,
      0,
      0
    ],
    "uptime": 183515.687
  },
  "process": {
    "argv": [
      "H:\\NODEJS\\node.exe",
      "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\server.js"
    ],
    "cwd": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend",
    "execPath": "H:\\NODEJS\\node.exe",
    "gid": null,
    "memoryUsage": {
      "arrayBuffers": 503303,
      "external": 2950568,
      "heapTotal": 70656000,
      "heapUsed": 43463544,
      "rss": 119005184
    },
    "pid": 15496,
    "uid": null,
    "version": "v22.19.0"
  },
  "rejection": true,
  "stack": "Error: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "timestamp": "2025-12-17 16:49:01.705",
  "trace": [
    {
      "column": 29,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "DatabaseManager.query",
      "line": 915,
      "method": "query",
      "native": false
    },
    {
      "column": 5,
      "file": "node:internal/process/task_queues",
      "function": "process.processTicksAndRejections",
      "line": 105,
      "method": "processTicksAndRejections",
      "native": false
    },
    {
      "column": 9,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.createTablesIfNotExist",
      "line": 625,
      "method": "createTablesIfNotExist",
      "native": false
    },
    {
      "column": 7,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.initialize",
      "line": 208,
      "method": "initialize",
      "native": false
    }
  ]
}
{
  "date": "Wed Dec 17 2025 16:49:41 GMT-0600 (hora estándar central)",
  "error": {
    "code": "ER_FK_INCOMPATIBLE_COLUMNS",
    "executionTime": 2,
    "originalError": {
      "code": "ER_FK_INCOMPATIBLE_COLUMNS",
      "errno": 3780,
      "message": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n          \n          INDEX idx_inventory_product (product_id),\n          INDEX idx_inventory_type (type),\n          INDEX idx_inventory_reference (reference_type, reference_id),\n          INDEX idx_inventory_user (user_id),\n          INDEX idx_inventory_created_at (created_at),\n          FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE,\n          FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\n        ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci\n        ",
      "sqlMessage": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sqlState": "HY000"
    },
    "params": [],
    "queryId": "query-1766011781437-onnccdl",
    "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TI"
  },
  "level": "error",
  "message": "unhandledRejection: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\nError: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "os": {
    "loadavg": [
      0,
      0,
      0
    ],
    "uptime": 183555.421
  },
  "process": {
    "argv": [
      "H:\\NODEJS\\node.exe",
      "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\server.js"
    ],
    "cwd": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend",
    "execPath": "H:\\NODEJS\\node.exe",
    "gid": null,
    "memoryUsage": {
      "arrayBuffers": 503303,
      "external": 2950568,
      "heapTotal": 70918144,
      "heapUsed": 43524616,
      "rss": 119037952
    },
    "pid": 20532,
    "uid": null,
    "version": "v22.19.0"
  },
  "rejection": true,
  "stack": "Error: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "timestamp": "2025-12-17 16:49:41.441",
  "trace": [
    {
      "column": 29,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "DatabaseManager.query",
      "line": 915,
      "method": "query",
      "native": false
    },
    {
      "column": 5,
      "file": "node:internal/process/task_queues",
      "function": "process.processTicksAndRejections",
      "line": 105,
      "method": "processTicksAndRejections",
      "native": false
    },
    {
      "column": 9,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.createTablesIfNotExist",
      "line": 625,
      "method": "createTablesIfNotExist",
      "native": false
    },
    {
      "column": 7,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.initialize",
      "line": 208,
      "method": "initialize",
      "native": false
    }
  ]
}
{
  "date": "Thu Dec 18 2025 15:39:57 GMT-0600 (hora estándar central)",
  "error": {
    "code": "ER_FK_INCOMPATIBLE_COLUMNS",
    "executionTime": 8,
    "originalError": {
      "code": "ER_FK_INCOMPATIBLE_COLUMNS",
      "errno": 3780,
      "message": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n          \n          INDEX idx_inventory_product (product_id),\n          INDEX idx_inventory_type (type),\n          INDEX idx_inventory_reference (reference_type, reference_id),\n          INDEX idx_inventory_user (user_id),\n          INDEX idx_inventory_created_at (created_at),\n          FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE,\n          FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\n        ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci\n        ",
      "sqlMessage": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sqlState": "HY000"
    },
    "params": [],
    "queryId": "query-1766093997581-jlxoaob",
    "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TI"
  },
  "level": "error",
  "message": "unhandledRejection: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\nError: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "os": {
    "loadavg": [
      0,
      0,
      0
    ],
    "uptime": 77850.593
  },
  "process": {
    "argv": [
      "H:\\NODEJS\\node.exe",
      "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\server.js"
    ],
    "cwd": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend",
    "execPath": "H:\\NODEJS\\node.exe",
    "gid": null,
    "memoryUsage": {
      "arrayBuffers": 497717,
      "external": 2944982,
      "heapTotal": 75898880,
      "heapUsed": 36847096,
      "rss": 117399552
    },
    "pid": 20356,
    "uid": null,
    "version": "v22.19.0"
  },
  "rejection": true,
  "stack": "Error: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "timestamp": "2025-12-18 15:39:57.608",
  "trace": [
    {
      "column": 29,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "DatabaseManager.query",
      "line": 915,
      "method": "query",
      "native": false
    },
    {
      "column": 5,
      "file": "node:internal/process/task_queues",
      "function": "process.processTicksAndRejections",
      "line": 105,
      "method": "processTicksAndRejections",
      "native": false
    },
    {
      "column": 9,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.createTablesIfNotExist",
      "line": 625,
      "method": "createTablesIfNotExist",
      "native": false
    },
    {
      "column": 7,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.initialize",
      "line": 208,
      "method": "initialize",
      "native": false
    }
  ]
}
{
  "date": "Thu Dec 18 2025 15:40:14 GMT-0600 (hora estándar central)",
  "error": {
    "code": "ER_FK_INCOMPATIBLE_COLUMNS",
    "executionTime": 6,
    "originalError": {
      "code": "ER_FK_INCOMPATIBLE_COLUMNS",
      "errno": 3780,
      "message": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n          \n          INDEX idx_inventory_product (product_id),\n          INDEX idx_inventory_type (type),\n          INDEX idx_inventory_reference (reference_type, reference_id),\n          INDEX idx_inventory_user (user_id),\n          INDEX idx_inventory_created_at (created_at),\n          FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE,\n          FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\n        ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci\n        ",
      "sqlMessage": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sqlState": "HY000"
    },
    "params": [],
    "queryId": "query-1766094014156-4lpzlv9",
    "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TI"
  },
  "level": "error",
  "message": "unhandledRejection: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\nError: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "os": {
    "loadavg": [
      0,
      0,
      0
    ],
    "uptime": 77867.156
  },
  "process": {
    "argv": [
      "H:\\NODEJS\\node.exe",
      "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\server.js"
    ],
    "cwd": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend",
    "execPath": "H:\\NODEJS\\node.exe",
    "gid": null,
    "memoryUsage": {
      "arrayBuffers": 503303,
      "external": 2950568,
      "heapTotal": 70918144,
      "heapUsed": 43410904,
      "rss": 119799808
    },
    "pid": 18184,
    "uid": null,
    "version": "v22.19.0"
  },
  "rejection": true,
  "stack": "Error: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "timestamp": "2025-12-18 15:40:14.165",
  "trace": [
    {
      "column": 29,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "DatabaseManager.query",
      "line": 915,
      "method": "query",
      "native": false
    },
    {
      "column": 5,
      "file": "node:internal/process/task_queues",
      "function": "process.processTicksAndRejections",
      "line": 105,
      "method": "processTicksAndRejections",
      "native": false
    },
    {
      "column": 9,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.createTablesIfNotExist",
      "line": 625,
      "method": "createTablesIfNotExist",
      "native": false
    },
    {
      "column": 7,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.initialize",
      "line": 208,
      "method": "initialize",
      "native": false
    }
  ]
}
{
  "date": "Thu Dec 18 2025 19:12:29 GMT-0600 (hora estándar central)",
  "error": {
    "code": "ER_FK_INCOMPATIBLE_COLUMNS",
    "executionTime": 4,
    "originalError": {
      "code": "ER_FK_INCOMPATIBLE_COLUMNS",
      "errno": 3780,
      "message": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n          \n          INDEX idx_inventory_product (product_id),\n          INDEX idx_inventory_type (type),\n          INDEX idx_inventory_reference (reference_type, reference_id),\n          INDEX idx_inventory_user (user_id),\n          INDEX idx_inventory_created_at (created_at),\n          FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE,\n          FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\n        ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci\n        ",
      "sqlMessage": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sqlState": "HY000"
    },
    "params": [],
    "queryId": "query-1766106749849-vj87i5j",
    "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TI"
  },
  "level": "error",
  "message": "unhandledRejection: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\nError: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "os": {
    "loadavg": [
      0,
      0,
      0
    ],
    "uptime": 90602.843
  },
  "process": {
    "argv": [
      "H:\\NODEJS\\node.exe",
      "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\server.js"
    ],
    "cwd": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend",
    "execPath": "H:\\NODEJS\\node.exe",
    "gid": null,
    "memoryUsage": {
      "arrayBuffers": 499433,
      "external": 2946698,
      "heapTotal": 74326016,
      "heapUsed": 36585960,
      "rss": 119582720
    },
    "pid": 1124,
    "uid": null,
    "version": "v22.19.0"
  },
  "rejection": true,
  "stack": "Error: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "timestamp": "2025-12-18 19:12:29.855",
  "trace": [
    {
      "column": 29,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "DatabaseManager.query",
      "line": 915,
      "method": "query",
      "native": false
    },
    {
      "column": 5,
      "file": "node:internal/process/task_queues",
      "function": "process.processTicksAndRejections",
      "line": 105,
      "method": "processTicksAndRejections",
      "native": false
    },
    {
      "column": 9,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.createTablesIfNotExist",
      "line": 625,
      "method": "createTablesIfNotExist",
      "native": false
    },
    {
      "column": 7,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.initialize",
      "line": 208,
      "method": "initialize",
      "native": false
    }
  ]
}
{
  "date": "Thu Dec 18 2025 19:58:21 GMT-0600 (hora estándar central)",
  "error": {
    "code": "ER_FK_INCOMPATIBLE_COLUMNS",
    "executionTime": 3,
    "originalError": {
      "code": "ER_FK_INCOMPATIBLE_COLUMNS",
      "errno": 3780,
      "message": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n          \n          INDEX idx_inventory_product (product_id),\n          INDEX idx_inventory_type (type),\n          INDEX idx_inventory_reference (reference_type, reference_id),\n          INDEX idx_inventory_user (user_id),\n          INDEX idx_inventory_created_at (created_at),\n          FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE,\n          FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\n        ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci\n        ",
      "sqlMessage": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sqlState": "HY000"
    },
    "params": [],
    "queryId": "query-1766109501496-prsu801",
    "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TI"
  },
  "level": "error",
  "message": "unhandledRejection: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\nError: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "os": {
    "loadavg": [
      0,
      0,
      0
    ],
    "uptime": 93354.484
  },
  "process": {
    "argv": [
      "H:\\NODEJS\\node.exe",
      "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\server.js"
    ],
    "cwd": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend",
    "execPath": "H:\\NODEJS\\node.exe",
    "gid": null,
    "memoryUsage": {
      "arrayBuffers": 503303,
      "external": 2950568,
      "heapTotal": 70918144,
      "heapUsed": 43496560,
      "rss": 119537664
    },
    "pid": 22800,
    "uid": null,
    "version": "v22.19.0"
  },
  "rejection": true,
  "stack": "Error: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "timestamp": "2025-12-18 19:58:21.501",
  "trace": [
    {
      "column": 29,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "DatabaseManager.query",
      "line": 915,
      "method": "query",
      "native": false
    },
    {
      "column": 5,
      "file": "node:internal/process/task_queues",
      "function": "process.processTicksAndRejections",
      "line": 105,
      "method": "processTicksAndRejections",
      "native": false
    },
    {
      "column": 9,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.createTablesIfNotExist",
      "line": 625,
      "method": "createTablesIfNotExist",
      "native": false
    },
    {
      "column": 7,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.initialize",
      "line": 208,
      "method": "initialize",
      "native": false
    }
  ]
}
{
  "date": "Thu Dec 18 2025 19:58:33 GMT-0600 (hora estándar central)",
  "error": {
    "code": "ER_FK_INCOMPATIBLE_COLUMNS",
    "executionTime": 3,
    "originalError": {
      "code": "ER_FK_INCOMPATIBLE_COLUMNS",
      "errno": 3780,
      "message": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n          \n          INDEX idx_inventory_product (product_id),\n          INDEX idx_inventory_type (type),\n          INDEX idx_inventory_reference (reference_type, reference_id),\n          INDEX idx_inventory_user (user_id),\n          INDEX idx_inventory_created_at (created_at),\n          FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE,\n          FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\n        ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci\n        ",
      "sqlMessage": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sqlState": "HY000"
    },
    "params": [],
    "queryId": "query-1766109513407-rbd3wua",
    "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TI"
  },
  "level": "error",
  "message": "unhandledRejection: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\nError: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "os": {
    "loadavg": [
      0,
      0,
      0
    ],
    "uptime": 93366.39
  },
  "process": {
    "argv": [
      "H:\\NODEJS\\node.exe",
      "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\server.js"
    ],
    "cwd": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend",
    "execPath": "H:\\NODEJS\\node.exe",
    "gid": null,
    "memoryUsage": {
      "arrayBuffers": 503303,
      "external": 2950568,
      "heapTotal": 70918144,
      "heapUsed": 43621224,
      "rss": 119971840
    },
    "pid": 17632,
    "uid": null,
    "version": "v22.19.0"
  },
  "rejection": true,
  "stack": "Error: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "timestamp": "2025-12-18 19:58:33.413",
  "trace": [
    {
      "column": 29,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "DatabaseManager.query",
      "line": 915,
      "method": "query",
      "native": false
    },
    {
      "column": 5,
      "file": "node:internal/process/task_queues",
      "function": "process.processTicksAndRejections",
      "line": 105,
      "method": "processTicksAndRejections",
      "native": false
    },
    {
      "column": 9,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.createTablesIfNotExist",
      "line": 625,
      "method": "createTablesIfNotExist",
      "native": false
    },
    {
      "column": 7,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.initialize",
      "line": 208,
      "method": "initialize",
      "native": false
    }
  ]
}
{
  "date": "Thu Dec 18 2025 19:58:47 GMT-0600 (hora estándar central)",
  "error": {
    "code": "ER_FK_INCOMPATIBLE_COLUMNS",
    "executionTime": 3,
    "originalError": {
      "code": "ER_FK_INCOMPATIBLE_COLUMNS",
      "errno": 3780,
      "message": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n          \n          INDEX idx_inventory_product (product_id),\n          INDEX idx_inventory_type (type),\n          INDEX idx_inventory_reference (reference_type, reference_id),\n          INDEX idx_inventory_user (user_id),\n          INDEX idx_inventory_created_at (created_at),\n          FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE,\n          FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\n        ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci\n        ",
      "sqlMessage": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sqlState": "HY000"
    },
    "params": [],
    "queryId": "query-1766109527264-rpbnj1c",
    "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TI"
  },
  "level": "error",
  "message": "unhandledRejection: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\nError: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "os": {
    "loadavg": [
      0,
      0,
      0
    ],
    "uptime": 93380.25
  },
  "process": {
    "argv": [
      "H:\\NODEJS\\node.exe",
      "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\server.js"
    ],
    "cwd": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend",
    "execPath": "H:\\NODEJS\\node.exe",
    "gid": null,
    "memoryUsage": {
      "arrayBuffers": 490110,
      "external": 2918204,
      "heapTotal": 73015296,
      "heapUsed": 42255432,
      "rss": 119685120
    },
    "pid": 3000,
    "uid": null,
    "version": "v22.19.0"
  },
  "rejection": true,
  "stack": "Error: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "timestamp": "2025-12-18 19:58:47.269",
  "trace": [
    {
      "column": 29,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "DatabaseManager.query",
      "line": 915,
      "method": "query",
      "native": false
    },
    {
      "column": 5,
      "file": "node:internal/process/task_queues",
      "function": "process.processTicksAndRejections",
      "line": 105,
      "method": "processTicksAndRejections",
      "native": false
    },
    {
      "column": 9,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.createTablesIfNotExist",
      "line": 625,
      "method": "createTablesIfNotExist",
      "native": false
    },
    {
      "column": 7,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.initialize",
      "line": 208,
      "method": "initialize",
      "native": false
    }
  ]
}
{
  "date": "Thu Dec 18 2025 20:20:39 GMT-0600 (hora estándar central)",
  "error": {
    "code": "ER_FK_INCOMPATIBLE_COLUMNS",
    "executionTime": 3,
    "originalError": {
      "code": "ER_FK_INCOMPATIBLE_COLUMNS",
      "errno": 3780,
      "message": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n          \n          INDEX idx_inventory_product (product_id),\n          INDEX idx_inventory_type (type),\n          INDEX idx_inventory_reference (reference_type, reference_id),\n          INDEX idx_inventory_user (user_id),\n          INDEX idx_inventory_created_at (created_at),\n          FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE,\n          FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\n        ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci\n        ",
      "sqlMessage": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sqlState": "HY000"
    },
    "params": [],
    "queryId": "query-1766110839195-zjkz6z7",
    "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TI"
  },
  "level": "error",
  "message": "unhandledRejection: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\nError: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "os": {
    "loadavg": [
      0,
      0,
      0
    ],
    "uptime": 94692.203
  },
  "process": {
    "argv": [
      "H:\\NODEJS\\node.exe",
      "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\server.js"
    ],
    "cwd": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend",
    "execPath": "H:\\NODEJS\\node.exe",
    "gid": null,
    "memoryUsage": {
      "arrayBuffers": 494649,
      "external": 2922743,
      "heapTotal": 71180288,
      "heapUsed": 43434616,
      "rss": 120381440
    },
    "pid": 23368,
    "uid": null,
    "version": "v22.19.0"
  },
  "rejection": true,
  "stack": "Error: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "timestamp": "2025-12-18 20:20:39.201",
  "trace": [
    {
      "column": 29,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "DatabaseManager.query",
      "line": 915,
      "method": "query",
      "native": false
    },
    {
      "column": 5,
      "file": "node:internal/process/task_queues",
      "function": "process.processTicksAndRejections",
      "line": 105,
      "method": "processTicksAndRejections",
      "native": false
    },
    {
      "column": 9,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.createTablesIfNotExist",
      "line": 625,
      "method": "createTablesIfNotExist",
      "native": false
    },
    {
      "column": 7,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.initialize",
      "line": 208,
      "method": "initialize",
      "native": false
    }
  ]
}
{
  "date": "Thu Dec 18 2025 20:39:45 GMT-0600 (hora estándar central)",
  "error": {
    "code": "ER_FK_INCOMPATIBLE_COLUMNS",
    "executionTime": 3,
    "originalError": {
      "code": "ER_FK_INCOMPATIBLE_COLUMNS",
      "errno": 3780,
      "message": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n          \n          INDEX idx_inventory_product (product_id),\n          INDEX idx_inventory_type (type),\n          INDEX idx_inventory_reference (reference_type, reference_id),\n          INDEX idx_inventory_user (user_id),\n          INDEX idx_inventory_created_at (created_at),\n          FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE,\n          FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE\n        ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci\n        ",
      "sqlMessage": "Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.",
      "sqlState": "HY000"
    },
    "params": [],
    "queryId": "query-1766111985888-ll6nlyl",
    "sql": "\n        CREATE TABLE IF NOT EXISTS inventory_movements (\n          id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\n          product_id INT UNSIGNED NOT NULL,\n          quantity INT NOT NULL,\n          type ENUM('in', 'out', 'adjust', 'transfer', 'initial') NOT NULL,\n          reference_id VARCHAR(100),\n          reference_type VARCHAR(50),\n          location_from VARCHAR(200),\n          location_to VARCHAR(200),\n          notes TEXT,\n          user_id INT UNSIGNED NOT NULL,\n          created_at TI"
  },
  "level": "error",
  "message": "unhandledRejection: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\nError: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "os": {
    "loadavg": [
      0,
      0,
      0
    ],
    "uptime": 95838.875
  },
  "process": {
    "argv": [
      "H:\\NODEJS\\node.exe",
      "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\server.js"
    ],
    "cwd": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend",
    "execPath": "H:\\NODEJS\\node.exe",
    "gid": null,
    "memoryUsage": {
      "arrayBuffers": 507881,
      "external": 2936015,
      "heapTotal": 70918144,
      "heapUsed": 42510256,
      "rss": 116039680
    },
    "pid": 3304,
    "uid": null,
    "version": "v22.19.0"
  },
  "rejection": true,
  "stack": "Error: Database query failed: Referencing column 'product_id' and referenced column 'id' in foreign key constraint 'inventory_movements_ibfk_1' are incompatible.\n    at DatabaseManager.query (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:915:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async DatabaseManager.createTablesIfNotExist (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:625:9)\n    at async DatabaseManager.initialize (E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js:208:7)",
  "timestamp": "2025-12-18 20:39:45.893",
  "trace": [
    {
      "column": 29,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "DatabaseManager.query",
      "line": 915,
      "method": "query",
      "native": false
    },
    {
      "column": 5,
      "file": "node:internal/process/task_queues",
      "function": "process.processTicksAndRejections",
      "line": 105,
      "method": "processTicksAndRejections",
      "native": false
    },
    {
      "column": 9,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.createTablesIfNotExist",
      "line": 625,
      "method": "createTablesIfNotExist",
      "native": false
    },
    {
      "column": 7,
      "file": "E:\\portafolio de desarrollo web\\app web\\proyectos basicos\\inventarios basicos\\backend\\src\\models\\database.js",
      "function": "async DatabaseManager.initialize",
      "line": 208,
      "method": "initialize",
      "native": false
    }
  ]
}
